<!DOCTYPE html>
<html lang="en-us">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='system領域が小さいので拡張してみる。'><title>Huawei P30 (ELE-L29) のsystem領域を拡張した話 その1</title>

<link rel='canonical' href='https://blog.j7b3y.com/p/huawei-p30-ele-l29-%E3%81%AEsystem%E9%A0%98%E5%9F%9F%E3%82%92%E6%8B%A1%E5%BC%B5%E3%81%97%E3%81%9F%E8%A9%B1-%E3%81%9D%E3%81%AE1/'>

<link rel="stylesheet" href="/scss/style.min.css"><meta property='og:title' content='Huawei P30 (ELE-L29) のsystem領域を拡張した話 その1'>
<meta property='og:description' content='system領域が小さいので拡張してみる。'>
<meta property='og:url' content='https://blog.j7b3y.com/p/huawei-p30-ele-l29-%E3%81%AEsystem%E9%A0%98%E5%9F%9F%E3%82%92%E6%8B%A1%E5%BC%B5%E3%81%97%E3%81%9F%E8%A9%B1-%E3%81%9D%E3%81%AE1/'>
<meta property='og:site_name' content='Nothing There'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Android' /><meta property='article:tag' content='カスタムROM' /><meta property='article:published_time' content='2021-10-17T17:31:45&#43;09:00'/><meta property='article:modified_time' content='2021-10-17T17:31:45&#43;09:00'/><meta property='og:image' content='https://blog.j7b3y.com/site/avatar.webp' />
<meta name="twitter:title" content="Huawei P30 (ELE-L29) のsystem領域を拡張した話 その1">
<meta name="twitter:description" content="system領域が小さいので拡張してみる。"><meta name="twitter:card" content="summary">
    <meta name="twitter:image" content='https://blog.j7b3y.com/site/avatar.webp' />
    <link rel="shortcut icon" href="/site/favicon.webp">

    </head>
    <body class="
    article-page has-toc
">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex 
    
        extended
    
">
    
        <div id="article-toolbar">
            <a href="/" class="back-home">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="15 6 9 12 15 18" />
</svg>



                <span>前のページ</span>
            </a>
        </div>
    
<main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/android/" >
                Android
            </a>
        
    </header>
    

    <h2 class="article-title">
        <a href="/p/huawei-p30-ele-l29-%E3%81%AEsystem%E9%A0%98%E5%9F%9F%E3%82%92%E6%8B%A1%E5%BC%B5%E3%81%97%E3%81%9F%E8%A9%B1-%E3%81%9D%E3%81%AE1/">Huawei P30 (ELE-L29) のsystem領域を拡張した話 その1</a>
    </h2>

    
    <h3 class="article-subtitle">
        system領域が小さいので拡張してみる。
    </h3>
    

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Oct 17, 2021</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    Reading Time: 4分
                </time>
            </div>
        
    </footer>
    
</div>
</header>

    <section class="article-content">
    <h2 id="前置きと注意">前置きと注意</h2>
<p><a class="link" href="/p/huawei-p30%e3%81%ablineageos-18.1%e3%82%92%e3%82%a4%e3%83%b3%e3%82%b9%e3%83%88%e3%83%bc%e3%83%ab%e3%81%97%e3%81%9f%e8%a9%b1/" >Huawei P30にlineageOS 18.1をインストールした話</a>の続きです。<br>
P30にGSIなカスタムROMをflashしようとしたところ<br>
system領域が小さい！と怒られて大敗北しました。<br>
今回はsystem領域の拡張に成功したのでメモ帳代わりにまとめることにしました。</p>
<p>⚠注意<br>
この作業に取り掛かる前に必ずデータのバックアップを取ってください。<br>
また、ここに書いてることを真似する場合は自己責任でお願いします。<br>
この記事の内容を実践して生じた損害等の一切の責任を負いかねますので、ご了承ください。<br>
<del>あなたの大切なスマホが文鎮になっても私は責任を取れません。</del><br>
また、この方法で拡張した場合はeRecoveryを使って純正ROMに戻す場合はパーティションを元に戻さないとエラーを吐くので注意してください。</p>
<h2 id="前提条件">前提条件</h2>
<ul>
<li>BootloaderがunlockされているHuawei P30(自分はDC-Phoneix&amp;HCUの時限ライセンスを購入して解除しました。 )</li>
<li>fastbootコマンドが使用できる環境</li>
<li>USB Type C to USB A 変換アダプタ</li>
<li>USBマウス</li>
</ul>
<p>P30はEMUI9.1にしておいてください。(EMUI10以降はfastbootコマンドが使えない&amp;強制的にBootloaderにロックがかけられるため。)<br>
eRecoveryを使用すると強制的にEMUI10にされますが、HCUでアンロックした場合は、HisuiteでEMUI9.1に戻すとbootloaderがアンロックされた状態に戻るはずなので慌てないでください。<br>
(自分の場合はちゃんと戻りました)</p>
<h2 id="準備">準備</h2>
<ul>
<li><a class="link" href="https://androidfilehost.com/?fid=11410963190603905658"  target="_blank" rel="noopener"
    >Mate20 XのTWRP</a></li>
<li>P30のRecovery_ramdisk</li>
<li><a class="link" href="https://forum.xda-developers.com/attachments/parted_gdisk_fdisk_mkfs-ext4-aarch64-zip.4494670/"  target="_blank" rel="noopener"
    >parted_gdisk_fdisk_mkfs-ext4-aarch64-zip</a></li>
<li>flashするROM(今回は<a class="link" href="https://droidontime.com/devices/arm64"  target="_blank" rel="noopener"
    >DotOS</a>を選択しました)</li>
<li>P30(<del>当たり前ですね</del>)</li>
</ul>
<h2 id="twrpをflashする">TWRPをflashする</h2>
<p>Mate20 XのTWRPイメージがあるディレクトリでターミナルを開いてください。<br>
開いたら</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">$ fastboot flash recovery_ramdisk twrp-3.2.1-0-everest-unofficial-v3.img
</span></span></code></pre></div><p>と入力してTWRPをflashしましょう。</p>
<h2 id="下準備">下準備</h2>
<p>再起動してTWRPを起動しましょう。(電源+Volume Up)<br>
タッチ操作は出来ないのでUSBマウスを接続して操作します。<br>
作業が長引くかもしれないのでスリープを無効にして画面の明るさを最低にしましょう。</p>
<p>マウスの接続を解除してPCに接続してください。<br>
接続したら一度</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">$ adb devices
</span></span></code></pre></div><p>と入力してちゃんと接続されているかを確認しましょう。</p>
<p>接続が確認出来たらpartedとgdiskをP30にコピーしましょう。<br>
parted_gdisk_fdisk_mkfs.ext4-AARCH64.zipを展開してターミナルで開きましょう</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">$ adb push parted /
</span></span><span class="line"><span class="cl">$ adb push gdisk /
</span></span></code></pre></div><p>コピーが終わったら端末のシェルを起動します。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">$ adb shell
</span></span></code></pre></div><p>シェルを起動したらpartedとgdiskがコピーされているかを確認してください。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">~ #  ls
</span></span><span class="line"><span class="cl">acc                         　　 init                        patch_hw                      splash2
</span></span><span class="line"><span class="cl">acct                        　   init.rc                     plat_file_contexts          storage
</span></span><span class="line"><span class="cl">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
</span></span><span class="line"><span class="cl">file_contexts.bin           parted                      sec_storage
</span></span><span class="line"><span class="cl">gdisk                           patch                       sepolicy
</span></span></code></pre></div><p>partedとgdiskがあることを確認したら実行権限を付与しましょう。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">~ # chmod +x parted
</span></span><span class="line"><span class="cl">~ # chmod +x gdisk
</span></span></code></pre></div><h2 id="拡張">拡張</h2>
<p>ここまで来たらあと一息！<br>
パーティションを操作しましょう。<br>
partedでsddを開きます。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">/parted /dev/block/sdd
</span></span><span class="line"><span class="cl">GNU Parted 3.2
</span></span><span class="line"><span class="cl">Using /dev/block/sdd
</span></span><span class="line"><span class="cl">Welcome to GNU Parted! Type &#39;help&#39; to view a list of commands.
</span></span></code></pre></div><p>まずはパーティションテーブルを確認しましょう。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl"><span class="p">(</span>parted<span class="p">)</span> unit MiB
</span></span><span class="line"><span class="cl"><span class="p">(</span>parted<span class="p">)</span> p
</span></span><span class="line"><span class="cl">Error: The backup GPT table is corrupt, but the primary appears OK, so that will
</span></span><span class="line"><span class="cl">be used.
</span></span><span class="line"><span class="cl">OK/Cancel? ok
</span></span><span class="line"><span class="cl">Model: HISI SS6100GBCV100MBD (scsi)
</span></span><span class="line"><span class="cl">Disk /dev/block/sdd: 122000MiB
</span></span><span class="line"><span class="cl">Sector size (logical/physical): 4096B/4096B
</span></span><span class="line"><span class="cl">Partition Table: gpt
</span></span><span class="line"><span class="cl">Disk Flags:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Number  Start    End        Size       File system  Name                 Flags
</span></span><span class="line"><span class="cl">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
</span></span><span class="line"><span class="cl">62      2928MiB  3016MiB    88.0MiB                 cust_a               msftdata
</span></span><span class="line"><span class="cl">63      3016MiB  5328MiB    2312MiB    ext4         system_a             msftdata
</span></span><span class="line"><span class="cl">64      5328MiB  7480MiB    2152MiB                 product_a            msftdata
</span></span><span class="line"><span class="cl">65      7480MiB  8056MiB    576MiB                  version_a            msftdata
</span></span><span class="line"><span class="cl">66      8056MiB  9200MiB    1144MiB                 preload_a            msftdata
</span></span><span class="line"><span class="cl">67      9200MiB  122000MiB  112800MiB  ext4         userdata             msftdata
</span></span></code></pre></div><p>確認ができたら適当なテキストファイルにコピペしておきましょう。<br>
メモを忘れた人用に自分のパーティションテーブルを貼っておきます。<a class="link" href="https://drive.google.com/file/d/1udu6zJOhqdF3KGqjez9y3yI2fYaiY6Vx/view"  target="_blank" rel="noopener"
    >Google Drive</a><br>
今回はproduct_aとsystem_aを削除して新しくsystem_aを作成します。
この記事の場合は63,64ですね。<br>
注意<br>
ここで間違ったパーティションを削除してしまうと再起不可になってしまう可能性があるので必ず手作業でやるようにしましょう。<br>
コピペはしないようにね。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl"><span class="p">(</span>parted<span class="p">)</span> rm
</span></span><span class="line"><span class="cl">Partition number? 63
</span></span><span class="line"><span class="cl"><span class="p">(</span>parted<span class="p">)</span> rm
</span></span><span class="line"><span class="cl">Partition number? 64
</span></span></code></pre></div><p>削除が終わったらgdiskに移動します。<br>
一度partedを閉じてから</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">~ # /gdisk /dev/block/sdd
</span></span><span class="line"><span class="cl">GPT fdisk (gdisk) version 1.0.3
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Partition table scan:
</span></span><span class="line"><span class="cl">  MBR: protective
</span></span><span class="line"><span class="cl">  BSD: not present
</span></span><span class="line"><span class="cl">  APM: not present
</span></span><span class="line"><span class="cl">  GPT: present
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Found valid GPT with protective MBR; using GPT.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Command (? for help):
</span></span></code></pre></div><p>ここからパーティションを追加します。<br>
この記事の場合は63ですね。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">Command (? for help): n
</span></span><span class="line"><span class="cl">Partition number (63-128, default 63): 63
</span></span><span class="line"><span class="cl">First sector (34-1914879, default = 772096) or {+-}size{KMGTP}:
</span></span><span class="line"><span class="cl">Last sector (772096-1914879, default = 1914879) or {+-}size{KMGTP}: +4464MiB
</span></span><span class="line"><span class="cl">Current type is &#39;Linux filesystem&#39;
</span></span><span class="line"><span class="cl">Hex code or GUID (L to show codes, Enter = 8300): 0700
</span></span><span class="line"><span class="cl">Changed type of partition to &#39;Microsoft basic data&#39;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Command (? for help):
</span></span></code></pre></div><p>作成したパーティションの名前を変更します。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">Command (? for help): c
</span></span><span class="line"><span class="cl">Partition number (1-67): 63
</span></span><span class="line"><span class="cl">Enter name: system_a
</span></span></code></pre></div><p>作業が終わったら書き込みをする前に一度変更後のパーティションテーブルを確認しましょう。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">Command (? for help): p
</span></span><span class="line"><span class="cl">Disk /dev/block/sdd: 31232000 sectors, 119.1 GiB
</span></span><span class="line"><span class="cl">Sector size (logical/physical): 4096/4096 bytes
</span></span><span class="line"><span class="cl">Disk identifier (GUID): F9F21FFF-A8D4-5F0E-9746-594869AEC34E
</span></span><span class="line"><span class="cl">Partition table holds up to 128 entries
</span></span><span class="line"><span class="cl">Main partition table begins at sector 2 and ends at sector 5
</span></span><span class="line"><span class="cl">First usable sector is 34, last usable sector is 31231999
</span></span><span class="line"><span class="cl">Partitions will be aligned on 128-sector boundaries
</span></span><span class="line"><span class="cl">Total free space is 94 sectors (376.0 KiB)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Number  Start (sector)    End (sector)  Size       Code  Name
</span></span><span class="line"><span class="cl">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
</span></span><span class="line"><span class="cl">  62          749568          772095   88.0 MiB    0700  cust_a
</span></span><span class="line"><span class="cl">  63          772096         1914879   4.4 GiB     0700  system_a
</span></span><span class="line"><span class="cl">  65         1914880         2062335   576.0 MiB   0700  version_a
</span></span><span class="line"><span class="cl">  66         2062336         2355199   1.1 GiB     0700  preload_a
</span></span><span class="line"><span class="cl">  67         2355200        31231999   110.2 GiB   0700  userdata
</span></span></code></pre></div><p>確認して大丈夫だったらパーティション情報の書き込みをしましょう。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">Command (? for help): w
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING
</span></span><span class="line"><span class="cl">PARTITIONS!!
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Do you want to proceed? (Y/N): Y
</span></span><span class="line"><span class="cl">OK; writing new GUID partition table (GPT) to /dev/block/sdd.
</span></span><span class="line"><span class="cl">Warning: The kernel is still using the old partition table.
</span></span><span class="line"><span class="cl">The new table will be used at the next reboot or after you
</span></span><span class="line"><span class="cl">run partprobe(8) or kpartx(8)
</span></span><span class="line"><span class="cl">The operation has completed successfully.
</span></span></code></pre></div><p>書き込みが終わったらgdiskを閉じてpartedを開いてください。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">~ # /parted /dev/block/sdd
</span></span><span class="line"><span class="cl">GNU Parted 3.2
</span></span><span class="line"><span class="cl">Using /dev/block/sdd
</span></span><span class="line"><span class="cl">Welcome to GNU Parted! Type &#39;help&#39; to view a list of commands.
</span></span><span class="line"><span class="cl"><span class="p">(</span>parted<span class="p">)</span>
</span></span></code></pre></div><p>Flagの設定</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl"><span class="p">(</span>parted<span class="p">)</span> <span class="k">set</span> <span class="nv">63</span>
</span></span><span class="line"><span class="cl">Flag to Invert? msftdata
</span></span><span class="line"><span class="cl">New state?  on/[off]? on
</span></span></code></pre></div><p>ext4にフォーマット</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">~ # make_ext4fs /dev/block/sdd63
</span></span><span class="line"><span class="cl">Creating filesystem with parameters:
</span></span><span class="line"><span class="cl">    Size: 3472883712
</span></span><span class="line"><span class="cl">    Block size: 4096
</span></span><span class="line"><span class="cl">    Blocks per group: 32768
</span></span><span class="line"><span class="cl">    Inodes per group: 8160
</span></span><span class="line"><span class="cl">    Inode size: 256
</span></span><span class="line"><span class="cl">    Journal blocks: 13248
</span></span><span class="line"><span class="cl">    Label:
</span></span><span class="line"><span class="cl">    Blocks: 847872
</span></span><span class="line"><span class="cl">    Block groups: 26
</span></span><span class="line"><span class="cl">    Reserved block group size: 207
</span></span><span class="line"><span class="cl">Created filesystem with 11/212160 inodes and 28026/847872 blocks
</span></span></code></pre></div><p>変更がちゃんとできているかの確認</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">~ # /parted /dev/block/sdd
</span></span><span class="line"><span class="cl">GNU Parted 3.2
</span></span><span class="line"><span class="cl">Using /dev/block/sdd
</span></span><span class="line"><span class="cl">Welcome to GNU Parted! Type &#39;help&#39; to view a list of commands.
</span></span><span class="line"><span class="cl"><span class="p">(</span>parted<span class="p">)</span> p
</span></span><span class="line"><span class="cl">Model: HISI SS6100GBCV100MBD (scsi)
</span></span><span class="line"><span class="cl">Disk /dev/block/sdd: 128GB
</span></span><span class="line"><span class="cl">Sector size (logical/physical): 4096B/4096B
</span></span><span class="line"><span class="cl">Partition Table: gpt
</span></span><span class="line"><span class="cl">Disk Flags:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Number  Start   End     Size    File system  Name                 Flags
</span></span><span class="line"><span class="cl">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
</span></span><span class="line"><span class="cl">62      3070MB  3163MB  92.3MB               cust_a               msftdata
</span></span><span class="line"><span class="cl">63      3163MB  7843MB  4681MB  ext4         system_a             msftdata
</span></span><span class="line"><span class="cl">65      7843MB  8447MB  604MB                version_a            msftdata
</span></span><span class="line"><span class="cl">66      8447MB  9647MB  1200MB               preload_a            msftdata
</span></span><span class="line"><span class="cl">67      9647MB  128GB   118GB                userdata             msftdata
</span></span></code></pre></div><p>これで拡張作業はおしまい。</p>
<h2 id="romをflashしよう">ROMをflashしよう</h2>
<p>これでようやく好きなROMが焼けるはず&hellip;。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">fastboot --disable-verity --disable-verification flash system dotOS-R-v5.2-arm64-ab-GAPPS-OFFICIAL.img
</span></span><span class="line"><span class="cl">Sending sparse &#39;system&#39; 1/8 (458752 KB)            OKAY [  3.193s]
</span></span><span class="line"><span class="cl">Writing &#39;system&#39;                                   OKAY [  1.051s]
</span></span><span class="line"><span class="cl">Sending sparse &#39;system&#39; 2/8 (458752 KB)            OKAY [  9.784s]
</span></span><span class="line"><span class="cl">Writing &#39;system&#39;                                   OKAY [  1.050s]
</span></span><span class="line"><span class="cl">Sending sparse &#39;system&#39; 3/8 (458752 KB)            OKAY [  9.894s]
</span></span><span class="line"><span class="cl">Writing &#39;system&#39;                                   OKAY [  1.051s]
</span></span><span class="line"><span class="cl">Sending sparse &#39;system&#39; 4/8 (458752 KB)            OKAY [  9.541s]
</span></span><span class="line"><span class="cl">Writing &#39;system&#39;                                   OKAY [  1.789s]
</span></span><span class="line"><span class="cl">Sending sparse &#39;system&#39; 5/8 (458752 KB)            OKAY [  9.920s]
</span></span><span class="line"><span class="cl">Writing &#39;system&#39;                                   OKAY [  4.190s]
</span></span><span class="line"><span class="cl">Sending sparse &#39;system&#39; 6/8 (458752 KB)            OKAY [  9.487s]
</span></span><span class="line"><span class="cl">Writing &#39;system&#39;                                   OKAY [  4.602s]
</span></span><span class="line"><span class="cl">Sending sparse &#39;system&#39; 7/8 (458752 KB)            OKAY [  9.500s]
</span></span><span class="line"><span class="cl">Writing &#39;system&#39;                                   OKAY [  1.034s]
</span></span><span class="line"><span class="cl">Sending sparse &#39;system&#39; 8/8 (233220 KB)            OKAY [  4.879s]
</span></span><span class="line"><span class="cl">Writing &#39;system&#39;                                   OKAY [  0.807s]
</span></span><span class="line"><span class="cl">Finished. Total time: 81.857s
</span></span></code></pre></div><p>わーい。
この後初期化するので一度stock recoveryに戻してください。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">fastboot flash recovery_ramdisk recovery_ramdiS.img
</span></span><span class="line"><span class="cl">Sending &#39;recovery_ramdisk&#39; (32768 KB)              OKAY [  0.232s]
</span></span><span class="line"><span class="cl">Writing &#39;recovery_ramdisk&#39;                         OKAY [  0.077s]
</span></span><span class="line"><span class="cl">Finished. Total time: 0.341s
</span></span></code></pre></div><p>リカバリーを起動してファクトリーリセットをしたらいよいよ起動！</p>
<h2 id="いよいよ起動">いよいよ起動</h2>
<p>まぁ普通に起動するはずです。<br>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">P30にDotOS降臨<br>ばいばいP20lite😭 <a href="https://t.co/iNxlIEgnJz">pic.twitter.com/iNxlIEgnJz</a></p>&mdash; j7b3y (@j7b3y) <a href="https://twitter.com/j7b3y/status/1449644900442464258?ref_src=twsrc%5Etfw">October 17, 2021</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<br>
後はmagiskを入れるなりなんなりで自由にやっちゃってください！<br>
<del>USB接続してもWindowsが認識できない不具合(?)はこちらでも残ってました</del></p>
<h2 id="参考にした記事">参考にした記事</h2>
<ul>
<li><a class="link" href="https://ysss.hateblo.jp/entry/20200425/1587793352#parted%E3%81%A8gdisk%E3%81%AE%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89"  target="_blank" rel="noopener"
    >Android端末にカスタムROMを焼くにシステム領域が足りないためパーティションを拡張する</a></li>
<li><a class="link" href="https://android.stackexchange.com/questions/216123/android-how-to-increase-system-partition-and-decrease-data-partition"  target="_blank" rel="noopener"
    >Android: how to increase system partition and decrease data partition?</a></li>
</ul>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/android/">Android</a>
        
            <a href="/tags/%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0rom/">カスタムROM</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>j7b3y All rights reserved.</span>
    </section>
    </footer>


    
</article>

    <aside class="related-contents--wrapper">
    
    
        <h2 class="section-title">関連するコンテンツ</h2>
        <div class="related-contents">
            <div class="flex article-list--tile">
                
                    
<article class="">
    <a href="/p/xperia-zr%E7%94%A8%E3%81%AElineage-18.1%E3%82%92%E3%83%93%E3%83%AB%E3%83%89%E3%81%97%E3%81%9F/">
        
        

        <div class="article-details">
            <h2 class="article-title">Xperia ZR用のLineage 18.1をビルドした</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/p/zenfone-5z%E3%82%92%E8%B2%B7%E3%81%A3%E3%81%9F%E3%81%AE%E3%81%A7evolution-x%E3%82%92%E5%85%A5%E3%82%8C%E3%81%A6%E3%81%BF%E3%82%8B/">
        
        

        <div class="article-details">
            <h2 class="article-title">Zenfone 5Zを買ったのでEvolution Xを入れてみる</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/p/huawei-p30%E3%81%ABlineageos-18.1%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%81%9F%E8%A9%B1/">
        
        

        <div class="article-details">
            <h2 class="article-title">Huawei P30にlineageOS 18.1をインストールした話</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/p/emui11%E3%81%8B%E3%82%89%E3%83%80%E3%82%A6%E3%83%B3%E3%82%B0%E3%83%AC%E3%83%BC%E3%83%89%E3%81%97%E3%81%9F%E7%AB%AF%E6%9C%AB%E3%81%8C%E8%AA%8D%E8%AD%98%E3%81%95%E3%82%8C%E3%81%AA%E3%81%8F%E3%81%AA%E3%82%8B%E5%95%8F%E9%A1%8C/">
        
        

        <div class="article-details">
            <h2 class="article-title">EMUI11からダウングレードした端末が認識されなくなる問題</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/p/%E3%82%A2%E3%83%97%E3%83%AA%E5%88%A5%E9%9F%B3%E9%87%8F%E3%82%B3%E3%83%B3%E3%83%88%E3%83%AD%E3%83%BC%E3%83%AB%E3%82%92%E5%8F%AF%E8%83%BD%E3%81%AB%E3%81%99%E3%82%8Baudio-headquarter%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F/">
        
        

        <div class="article-details">
            <h2 class="article-title">アプリ別音量コントロールを可能にする『Audio HeadQuarter』を使ってみた</h2>
        </div>
    </a>
</article>
                
            </div>
        </div>
    
</aside>

     
    
        
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "j7b3ys-blog" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (DISQUS) {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2021 - 
        
        2022 Nothing There
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.5.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer="true"
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer="true"
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    
        <aside class="sidebar right-sidebar sticky">
            <section class="widget archives">
                <div class="widget-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



                </div>
                <h2 class="widget-title section-title">目次</h2>
                
                <div class="widget--toc">
                    <nav id="TableOfContents">
  <ol>
    <li><a href="#前置きと注意">前置きと注意</a></li>
    <li><a href="#前提条件">前提条件</a></li>
    <li><a href="#準備">準備</a></li>
    <li><a href="#twrpをflashする">TWRPをflashする</a></li>
    <li><a href="#下準備">下準備</a></li>
    <li><a href="#拡張">拡張</a></li>
    <li><a href="#romをflashしよう">ROMをflashしよう</a></li>
    <li><a href="#いよいよ起動">いよいよ起動</a></li>
    <li><a href="#参考にした記事">参考にした記事</a></li>
  </ol>
</nav>
                </div>
            </section>
        </aside>
    

        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                defer="false"
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
